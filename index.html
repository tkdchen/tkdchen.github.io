<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8'>
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
		<meta name="msvalidate.01" content="BFF6A5C0505C557ED95FF6AD05C0CEF2" />

		<title>./echo X</title>

		<link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen" />
		<link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen" />
		<script type="text/javascript" src="/javascripts/jquery.js"></script>
		<script src="/javascripts/scale.fix.js"></script>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-30955754-1']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

		</script>
	</head>

	<body>

		<div class="wrapper">
			<header>
				<div class="container">
					<h1 class="header"><a href="/">echo X</a></h1>
					<p class="header"></p>

					<ul>
						<li><a class="buttons" href="http://weibo.com/tkdchen">微博</a></li>
						<li><a class="buttons" href="http://www.flickr.com/photos/55770412@N08/">Photos</a></li>
						<li><a class="buttons js-projects" href="/projects.html">Projects</a></li>
						<li><a class="buttons linkedin" href="http://cn.linkedin.com/pub/chenxiong-qi/2b/a83/625/">LinkedIn</a></li>
						<li><a class="buttons" href="http://about.me/tkdchen">About me</a></li>
						<li><a class="buttons github" href="https://github.com/tkdchen/mysite">View On GitHub</a></li>
					</ul>

				</div>
			</header>

			<section>
				<div class="container">
						
	<div class="post-section">
		
			<h1><a href="/blog/2013/06/09/release-resource-from-backbone-object.html">及时释放Backbone对象占用的资源</a></h1>
			<p><a href="http://backbonejs.org/">Backbone</a>对象？是的，此文中提到的Backbone对象指的就是View，Model和Collection。他们占用什么资源呢？在一个使用了Backbone、<a href="http://socket.io/">socket.io</a>和<a href="http://alogicalparadox.com/backbone.iobind/">ioBind</a>的项目中，会在DOM层、Model和Collection，以及socket三个层面注册大量的事件处理函数实现用户功能。这些事件监听就是最大的一个资源占用。不仅仅消耗内存，还会导致在反复创建同一个Model或者Collection的对象的情况下事件响应的泛滥。因此，在什么时候释放这些资源，以及如何释放非常值得关注。为了回答这两个问题，先通过代码来看看典型的应用方式。</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">BaseModel</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">idAttribute</span><span class="o">:</span> <span class="s2">&quot;_id&quot;</span><span class="p">,</span>
  <span class="nx">socket</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">socket</span><span class="p">,</span>
  <span class="nx">urlRoot</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>

  <span class="nx">url</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">urlRoot</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;modelCleanup&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">modelCleanup</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ioBind</span><span class="p">(</span><span class="s1">&#39;update&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">serverChange</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ioBind</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">serverDelete</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">serverChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nx">serverDelete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{}</span>
  <span class="nx">modelCleanup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">Checklist</span> <span class="o">=</span> <span class="nx">BaseModel</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">urlRoot</span><span class="o">:</span> <span class="s2">&quot;checklist&quot;</span><span class="p">,</span>

  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">itemCollection</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ChecklistItemCollection</span><span class="p">;</span>
    <span class="nx">BaseModel</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">initialize</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">ChecklistItem</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">urlRoot</span><span class="o">:</span> <span class="s2">&quot;checklistitem&quot;</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">BaseCollection</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
  <span class="nx">model</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
  <span class="nx">socket</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">socket</span><span class="p">,</span>

  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">models</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_</span><span class="p">.</span><span class="nx">bindAll</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;serverCreate&quot;</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">ioBind</span><span class="p">(</span><span class="s2">&quot;create&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">socket</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">serverCreate</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">serverCreate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">ChecklistCollection</span> <span class="o">=</span> <span class="nx">BaseCollection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/checklist&quot;</span><span class="p">,</span>
  <span class="nx">model</span><span class="o">:</span> <span class="nx">Checklist</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">ChecklistItemCollection</span> <span class="o">=</span> <span class="nx">BaseCollection</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/checklistitem&quot;</span><span class="p">,</span>
  <span class="nx">model</span><span class="o">:</span> <span class="nx">ChecklistItem</span>
<span class="p">});</span>
</code></pre></div>




			<p class="read-more"><a href="/blog/2013/06/09/release-resource-from-backbone-object.html">Read More ...</a></p>
		
		<p><a href="/blog/2013/06/09/release-resource-from-backbone-object.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#javascript">javascript</a>
			
			<a href="/tags.html#backbone">backbone</a>
			
		</p>
	</div>

	<div class="post-section">
		
			<h1><a href="/blog/2013/05/28/first-nodejs-package.html">我的第一个Node软件包nsignal</a></h1>
			<p>写于2013年5月28日晚</p>

<p>用Javascript写程序已经有段时间了。在Node的环境下，Javascript充分发挥了起长期以来被忽视的强大力量。随着写的Javascript代码越来越多，对这门语言有了更加深入的理解。与此同时，在不断地使用和阅读第三方Node软件包的过程中，越发的感觉到Javascript的潜力无限和未来发展的各种无限可能。你愿意使用Javascirpt写日常的脚本程序吗，写GUI程序吗，开发网络应用吗？</p>

<p>今天花了一点时间，把目前项目中的一个简单的组件剥离了出来，把它放到了<a href="https://github.com/tkdchen/nsignal">github</a>上，同时也快速体验了一把Node软件包分发。</p>

<p>使用下面的命令从Node软件仓库npm中的安装，</p>

<pre><code>npm install nsignal
</code></pre>

			<p class="read-more"><a href="/blog/2013/05/28/first-nodejs-package.html">Read More ...</a></p>
		
		<p><a href="/blog/2013/05/28/first-nodejs-package.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#nsignal">nsignal</a>
			
			<a href="/tags.html#npm">npm</a>
			
			<a href="/tags.html#node">node</a>
			
			<a href="/tags.html#javascript">javascript</a>
			
		</p>
	</div>

	<div class="post-section">
		
			<h1>给Python软件包打RPM包用的SPEC模板</h1>

<p>这个模板可作为为Python软件包制作RPM包的一个起点。它提供了能够成功完成一个RPM包的所有必要的信息。
同时，预留了一些需要根据使用者的实际情况替换的信息。我使用了$var的格式来表明哪些需要用真实值来替
换。</p>

<p>模板遵循Fedora社区的RPM包打包规范。例如，Python软件包对应的RPM包通常加上<code>python-</code>前缀。
如果你是在为一个django框架的扩展包打包，那么前缀应该使用<code>django-</code>。</p>

<script src='https://gist.github.com/5607189.js?file='></script>


<div><noscript><pre><code></code></pre></noscript></div>


		
		<p><a href="/blog/2013/05/19/rpm-spec-for-python-gist.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#rpm">rpm</a>
			
			<a href="/tags.html#spec">spec</a>
			
			<a href="/tags.html#gist">gist</a>
			
		</p>
	</div>

	<div class="post-section">
		
			<h1>跟家还得带着口罩</h1>

<p>春暖花开，满世界生机勃勃。但也是我一年中，鼻子最痛苦的时候。这个时候出个门如果口罩，
就得备一卷卫生纸。甚至跟家还得带着点口罩，因为要开窗通风。如果要去个植物园那样的地方，
口罩可是我的神啊。</p>

<p><img src="http://farm9.staticflickr.com/8540/8694526863_198ea71813_z.jpg" alt="Wearing Mask" /></p>

		
		<p><a href="/essay/2013/04/30/02-wear-mask-even-if-at-home.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#life">life</a>
			
		</p>
	</div>

	<div class="post-section">
		
			<h1>失眠</h1>

<p>写于2013年4月最后一天，凌晨3点。</p>

<p>失眠了。第一次这么严重的睡不着。我想，肯定是失眠了。身体躺在床上翻来覆去始终找不到一个舒服的入睡的姿势。脑子里跟过火车似的，满脑子都是事情。像泉水一样，往外冒。根本就不再自己的控制范围之内。现在在硬撑着敲这些字。脑袋发沉，倦意已浓，希望一会儿能尽快入睡。鼻炎不再影响今天的睡眠。第一次失眠了，让我学会了一个单词，<a href="http://cn.bing.com/dict/search?q=insomnia">insomnia</a>。</p>

<p>晚安！</p>

		
		<p><a href="/essay/2013/04/30/01-insomnia.html#disqus_thread">Comments</a> Tags:
			
		</p>
	</div>

	<div class="post-section">
		
			<h1>开始用jekyll在Github Pages上写东西</h1>

<p>写于2013年4月最后一天凌晨</p>

<p>经过一个下午的尝试，终于把jekyll搞定。熟悉jekyll的使用方法后，发布文章会变得非常轻松。没有什么更多的可说的了。Github的发展方向让人充满想象。任
何可以用git管理的东西都可以在Github上托管。以至于可以遇见的到，任何我想要与他人分享的内容都可以借助于这个公共的平台。内容管理完全自足，自由，没有任
何限制。只不过，发布之前自己的先做好审核。否则，一不小心你的小秘密就公之于众了。</p>

		
		<p><a href="/essay/2013/04/30/00-pages-with-jekyll-is-ready.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#github">github</a>
			
			<a href="/tags.html#jekyll">jekyll</a>
			
		</p>
	</div>

	<div class="post-section">
		
			<h1>Using jekyll to write articles in github</h1>

<p>It's interesting so much! :)</p>

<p><a href="http://www.pythong.org">Python</a> is a powerful programming language.</p>

<p>用Emacs写东西感觉怎么样啊？</p>

		
		<p><a href="/essay/2013/04/29/using-jekyll.html#disqus_thread">Comments</a> Tags:
			
			<a href="/tags.html#github">github</a>
			
			<a href="/tags.html#jekyll">jekyll</a>
			
		</p>
	</div>

				</div>
			</section>

			<footer>
				<p>
					&copy; Chenxiong Qi, 2013. Powered by <a href="https://github.com/mojombo/jekyll/" target="_blank">Jekyll</a>
					<a href="http://www.vim.org/"><img class="created-with-vim" src="/images/created-with-vim.png" /></a>
				</p>
			</footer>
		</div>

	</body>
</html>
