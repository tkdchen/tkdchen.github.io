<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <title>./echo X</title>

    <link rel="stylesheet" type="text/css" href="/stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/print.css" media="print" />
		<script src="javascripts/scale.fix.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-30955754-1']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

		</script>
  </head>

  <body>

		<div class="wrapper">
			<header>
				<div class="container">
					<h1 class="header"><a href="/">echo X</a></h1>
					<p class="header"></p>

					<ul>
						<li><a class="buttons" href="http://weibo.com/tkdchen">微博</a></li>
						<li><a class="buttons" href="http://www.flickr.com/photos/55770412@N08/">Photos</a></li>
						<li><a class="buttons github" href="https://github.com/tkdchen">Projects@github</a></li>
						<li><a class="buttons launchpad" href="https://github.com/tkdchen">Projects@launchpad</a></li>
						<li>
							<a class="buttons js-projects" href="#">Projects</a>
							<ul style="display:none">
								<li>github</li>
								<li>launchpad</li>
							</ul>
						</li>
						<li><a class="buttons linkedin" href="http://cn.linkedin.com/pub/chenxiong-qi/2b/a83/625/">LinkedIn</a></li>
						<li><a class="buttons" href="http://about.me/">About me</a></li>
						<li><a class="buttons github" href="https://github.com/tkdchen/mysite">View On GitHub</a></li>
					</ul>

				</div>
			</header>

			<section>
				<div class="container">
						<div class="post-section">
	<h1>我的第一个Node软件包nsignal</h1>

<p>写于2013年5月28日晚</p>

<p>用Javascript写程序已经有段时间了。在Node的环境下，Javascript充分发挥了起长期以来被忽视的强大力量。随着写的Javascript代码越来越多，对这门语言有了更加深入的理解。与此同时，在不断地使用和阅读第三方Node软件包的过程中，越发的感觉到Javascript的潜力无限和未来发展的各种无限可能。你愿意使用Javascirpt写日常的脚本程序吗，写GUI程序吗，开发网络应用吗？</p>

<p>今天花了一点时间，把目前项目中的一个简单的组件剥离了出来，把它放到了<a href="https://github.com/tkdchen/nsignal">github</a>上，同时也快速体验了一把Node软件包分发。</p>

<p>使用下面的命令从Node软件仓库npm中的安装，</p>

<pre><code>npm install nsignal
</code></pre>

<p><a href="https://npmjs.org/package/nsignal">nsignal</a>借鉴了django的Signal机制，与mongoose的模型对象结合使用。使得开发人员能够在某个对象模型发生特定事件的时候，通知注册的处理函数，以完成某些任务。这样，可以将这部分代码和处理模型对象的逻辑，例如create，update和delete，分离开。具体的使用方法，可以参照<a href="https://github.com/tkdchen/nsignal/blob/master/README.md">README.md</a>。</p>

<p>Node软件包发布过程很简单。下面两个方面的内容都做了，成功发布那就是必须的了。</p>

<p>首先，准备源代码。这没什么特别的。其他的项目怎么做，这还怎么做。只不过，需要一些npm所需的文件。其中，package.json是最重要的一个。此外，除了源代码文件，还应该添加以下文件。</p>

<ul>
<li>README.md</li>
<li>LICENSE</li>
</ul>


<p>nsignal使用的目录结构非常简单，只有两层。第一层，也就是根目录，包含了所有了文件，包括源代码文件。第二层是一个名为tests的目录，所有包含测试代码的源文件都会放在这里。</p>

<p>其次，发布。<a href="https://gist.github.com/coolaj86/1318304">Getting Started with NPM (as a developer)</a> 给出了非常详细的步骤，可助你一臂之力。步骤很简单。仔细地，一步一步地跟着做就okay。需要提到提到一点是，<code>npm init</code>不会覆盖你写的package.json。它会向你提几个问题，然后会连同你写的package.json中的所有内容一同创建一份新的出来。</p>

<p>几点感受。</p>

<p>Javascript的简单性充分的体现到了软件包的分发上。一个带有充分信息的package.json是多么的重要。</p>

<p>Javascript的简单性是极具欺骗性的。一旦你上了船，不久就会发现处处被埋伏。一不小心就踩下去。随处可见的回调处理，对传统的程序的顺序执行的思维逻辑形成挑战。当然，这同时也是非常有意思的，在你逐渐熟悉了这种行事方式后。幸好，Node社区的大牛门开发了<a href="https://github.com/caolan/async">async</a>这样一把神器。</p>

<p>在Javascript中写面向对象的代码是多么的难受。很多探路者们已经为像我这样的后来者留下了丰富的、有价值的资产。Node的<code>utils.inherits</code>能够方便的实现类的继承概念。但是，千万不要用在Python、Java、c++里进行OOP经验完全搬到这里。</p>

<p>基于事件的异步模型是现在炙手可热的编程方式，Python有<a href="http://gevent.org/">gevent</a>，Java、Scala、ruby都有各自的实现方案。而V8给予了node先天的能力。只要你开始在node中写Javascript，跑Javascript，你就在享受这种特性。期待更加完备的Javascript。</p>

<p>如果你正沉浸在时髦的Node和Javascript中，祝你好运气，少踩点坑。:)</p>

	<p>Tags:
	
	<a href="/tags.html#nsignal">nsignal</a>
	
	<a href="/tags.html#npm">npm</a>
	
	<a href="/tags.html#node">node</a>
	
	<a href="/tags.html#javascript">javascript</a>
	
	</p>
	<div id="disqus_thread"></div>
	<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
			var disqus_shortname = 'tkdchen'; // required: replace example with your forum shortname

			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

				</div>
			</section>

			<footer>
				<p>
					&copy; Chenxiong Qi, 2013. Powered by <a href="https://github.com/mojombo/jekyll/" target="_blank">Jekyll</a>
					<a href="http://www.vim.org/"><img class="created-with-vim" src="../images/created-with-vim.png" /></a>
				</p>
			</footer>
		</div>

		<script type="text/javascript" src="javascripts/jquery.js"></script>
		<script type="text/javascript">
			$(document).ready(function() {
				$(".js-projects").click(function() {
					//$(event.target).find("ul").toggle();
					console.log("###> event");
				});
			});
		</script>

  </body>
</html>
